<!doctype html>
<html lang="fr" prefix="og: https://ogp.me/ns#">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ton Nom — Motion Designer</title>
  <meta name="description" content="Portfolio de motion design : showreel, sélection de projets, compétences, contact." />

  <!-- Open Graph / Twitter -->
  <meta property="og:title" content="Showreel — Motion Designer" />
  <meta property="og:description" content="Showreel + portfolio compact pour recruteurs. Lien direct : ?view=reel" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="assets/showreel_poster.jpg" />
  <meta property="og:url" content="https://ton-domaine.fr" />
  <meta name="twitter:card" content="summary_large_image" />

  <!-- Favicons -->
  <link rel="icon" href="assets/favicon.png" sizes="any" />
  <link rel="apple-touch-icon" href="assets/apple-touch-icon.png" />

  <!-- Preload essentiels -->
  <link rel="preload" as="video" href="assets/showreel.mp4" />
  <link rel="preload" as="image" href="assets/showreel_poster.jpg" />

  <style>
    :root{
      --bg:#0b0b0c; --fg:#f2f2f2; --muted:#a2a2a7; --brand:#87f; --card:#141417; --ring:#7aa2ff88;
      --preloader-color:#ffffff; /* Couleur du préloader Lottie */
      --ctrl-fg:#fff; --ctrl-bg:rgba(0,0,0,.55); --ctrl-track:#ffffff80; --ctrl-thumb:#fff; /* Contrôles vidéo */
    }
    @media (prefers-color-scheme: light) {
      :root{ --bg:#ffffff; --fg:#0b0b0c; --muted:#555; --card:#f6f6f7; --brand:#3b5cff; --ring:#365cff33; }
      .logo-mark{ filter:none; }
    }
    *,*::before,*::after{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{ margin:0; font:16px/1.5 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; color:var(--fg); background:var(--bg); -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;}
    a{ color:inherit; text-decoration:none; }
    a:focus-visible, button:focus-visible { outline:2px solid var(--ring); outline-offset:2px; }
    img{ max-width:100%; display:block; }
    .container{ width:min(1120px, 100% - 2rem); margin-inline:auto; overflow:visible; }
    .btn{ display:inline-flex; align-items:center; gap:.5rem; border:1px solid #333; background:#1a1a1f; color:#fff; padding:.75rem 1rem; border-radius:12px; cursor:pointer; transition:.2s ease; }
    .btn:hover{ transform: translateY(-1px); }
    .btn.primary{ background:linear-gradient(180deg, var(--brand), #5a78ff); border:0; color:#fff; }
    .btn.ghost{ background:transparent; border-color:#444; color:var(--fg); }
    header.site{ position:sticky; top:0; z-index:30; backdrop-filter: blur(6px); background: color-mix(in oklab, var(--bg) 80%, transparent); border-bottom:1px solid #1f1f24; }
    header .row{ display:flex; align-items:center; justify-content:space-between; padding:.75rem 0; }
    .logo{ display:flex; gap:.75rem; align-items:center; font-weight:700; letter-spacing:.2px; }
    .logo-mark{ width:28px; aspect-ratio:1; border-radius:8px; background:conic-gradient(from 200deg, var(--brand), #b9c3ff 40%, #111 41%); filter:saturate(1.1) brightness(1.1); }
    nav a{ padding:.5rem .75rem; color:var(--muted); }
    nav a:hover{ color:var(--fg); }
    .skip{ position:absolute; left:-9999px; top:auto; width:1px; height:1px; overflow:hidden; }
    .skip:focus{ position:fixed; left:1rem; top:1rem; width:auto; height:auto; padding:.5rem .75rem; background:#000; color:#fff; border-radius:6px; z-index:100; }

    /* Hero */
    .hero{ padding:3rem 0 1.5rem; display:grid; gap:1.25rem; }
    .eyebrow{ color:var(--muted); text-transform:uppercase; letter-spacing:.2em; font-size:.8rem; }
    h1{ margin:.25rem 0 0; font-size:clamp(1.75rem, 3vw, 2.5rem); line-height:1.2; }
    .hero-actions{ display:flex; gap:.6rem; flex-wrap:wrap; }

    /* Video */
    .reel-wrap{ background:var(--card); border:1px solid #1f1f24; border-radius:16px; overflow:visible; position:relative; }
    .reel-wrap.cinema{ position:relative; left:50%; transform:translateX(-50%); width:min(80vw, 1400px); z-index:20; }
    .reel-topbar{ display:flex; align-items:center; justify-content:space-between; padding:.75rem .75rem .25rem; gap:.5rem; }
    .reel-actions{ display:flex; gap:.5rem; align-items:center; }
    .reel-viewport{ position:relative; overflow:hidden; border-radius: inherit; aspect-ratio: var(--reel-ratio, 16/9); }
    .reel{ width:100%; height:100%; background:#000; display:block; object-fit: cover; object-position: 50% var(--reel-y, 0%); }
    .is-fullscreen .reel{ object-fit: contain; }
    .badge{ font-size:.75rem; padding:.2rem .5rem; border:1px solid #2a2a33; border-radius:999px; color:var(--muted); }

    /* Custom controls overlay */
    .reel-controls{ position:absolute; left:0; right:0; bottom:0; display:flex; align-items:center; gap:.6rem; padding:.5rem .75rem; color:var(--ctrl-fg); background:linear-gradient(to top, var(--ctrl-bg), rgba(0,0,0,0)); }
    .reel-controls .ctrl{ appearance:none; background:transparent; border:0; color:inherit; font:inherit; cursor:pointer; padding:.25rem .35rem; border-radius:8px; }
    .reel-controls .ctrl:hover{ background:rgba(255,255,255,.06); }
    .ctrl-play{ width:34px; min-width:34px; height:34px; display:grid; place-items:center; }
    .ctrl-cinema{ height:34px; padding:.25rem .5rem; }
    .ctrl-seek{ flex:1; height:24px; cursor:pointer; }
    /* Range styling */
    .ctrl-seek{ -webkit-appearance: none; background:transparent; }
    .ctrl-seek:focus{ outline:none; }
    .ctrl-seek::-webkit-slider-runnable-track{ height:4px; background:var(--ctrl-track); border-radius:999px; }
    .ctrl-seek::-webkit-slider-thumb{ -webkit-appearance:none; width:14px; height:14px; border-radius:50%; background:var(--ctrl-thumb); margin-top:-5px; }
    .ctrl-seek::-moz-range-track{ height:4px; background:var(--ctrl-track); border-radius:999px; }
    .ctrl-seek::-moz-range-thumb{ width:14px; height:14px; border-radius:50%; background:var(--ctrl-thumb); border:0; }

    /* Footer */
    footer{ padding:2rem 0 3rem; color:var(--muted); border-top:1px solid #1f1f24; }

    /* Utilities */
    .hidden{ display:none !important; }
    .sr-only{ position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0; }

    /* Preloader */
    .preloader{ position:fixed; inset:0; display:grid; place-items:center; background:var(--bg); z-index:1000; transition:opacity .3s ease, visibility .3s ease;}
    .preloader #lottie-holder{ width: clamp(300px, 10vmin, 140px); aspect-ratio: 1 / 1; }
    .preloader #lottie-holder svg { width:100%; height:100%; display:block; }
    .preloader.is-hidden{ opacity:0; visibility:hidden; pointer-events:none; }
    .preloader__inner{ display:grid; gap:.6rem; justify-items:center; text-align:center; }
    .preloader__label{ color:var(--muted); font-size:.9rem; }
    .preloader__skip{ margin-top:.25rem; }

    /* Teinte Lottie */
    .preloader #lottie-holder{ color:var(--preloader-color); }
    .preloader #lottie-holder svg *{ fill:currentColor !important; stroke:currentColor !important; }
  </style>
</head>
<body>
  <a class="skip" href="#main">Aller au contenu</a>

  <!-- Preloader overlay (Lottie, lecture unique) -->
  <div id="preloader" class="preloader" aria-live="polite" aria-busy="true">
    <div class="preloader__inner">
      <div id="lottie-holder" data-lottie="assets/loader.json" data-color="#ffffff" aria-hidden="true"></div>
      <button id="skipPreloader" class="btn ghost preloader__skip">Passer</button>
    </div>
  </div>

  <header class="site">
    <div class="container row">
      <a href="#" class="logo" aria-label="Accueil">
        <span class="logo-mark" aria-hidden="true"></span>
        <span>Ton&nbsp;Nom</span>
      </a>
      <nav aria-label="Navigation principale">
        <a href="#reel">Showreel</a>
        <a href="#projets">Projets</a>
        <a href="#a-propos">À propos</a>
        <a href="#contact">Contact</a>
      </nav>
      <div class="hero-actions">
        <button class="btn ghost" id="copyLink" aria-label="Copier le lien recruteur">Copier lien recruteur</button>
        <a class="btn primary" href="#reel">Voir le showreel</a>
      </div>
    </div>
  </header>

  <main id="main" class="container">
    <section class="hero">
      <p class="eyebrow">Motion Design — 2D/3D — Brand — Social</p>
      <h1>Showreel en premier. Le reste si vous avez le temps.</h1>
      <p>Tout juste diplômé·e, peu de projets mais l’essentiel est ici. Le showreel sert de CV : rapide à voir, simple à partager, facile à télécharger.</p>
      <div class="hero-actions">
        <a href="#reel" class="btn primary">▶︎ Regarder le showreel</a>
        <a href="assets/CV.pdf" class="btn" download>⬇ Télécharger le CV (PDF)</a>
        <a href="#contact" class="btn ghost">✉️ Me contacter</a>
      </div>
    </section>

    <section id="reel" aria-label="Showreel" class="reel-wrap">
      <div class="reel-topbar">
        <span class="badge">Showreel</span>
        <div class="reel-actions">
          <a href="assets/showreel.mp4" class="btn ghost" download>⬇ MP4</a>
          <a href="https://vimeo.com/1109030524" class="btn ghost" target="_blank" rel="noopener">↗︎ Voir sur Vimeo</a>
          <button class="btn" id="fullscreenBtn" aria-label="Basculer en plein écran">⤢ Plein écran</button>
        </div>
      </div>
      <div class="reel-viewport" id="reelViewport">
        <video class="reel" id="reelVideo" preload="metadata" poster="assets/showreel_poster.jpg" playsinline>
          <source src="assets/showreel.mp4" type="video/mp4" />
          <track label="Français" kind="subtitles" srclang="fr" src="assets/showreel_fr.vtt" default />
          <p class="sr-only">Votre navigateur ne supporte pas la vidéo HTML5. <a href="https://vimeo.com/1109030524">Voir sur Vimeo</a>.</p>
        </video>
        <!-- Custom controls: play | seek | cinema -->
        <div class="reel-controls" role="group" aria-label="Contrôles vidéo">
          <button class="ctrl ctrl-play" id="ctrlPlay" aria-label="Lecture/Pause" title="Lecture/Pause">▶︎</button>
          <input class="ctrl ctrl-seek" id="ctrlSeek" type="range" min="0" max="1000" step="1" value="0" aria-label="Barre de progression" />
          <button class="ctrl ctrl-cinema" id="ctrlCinema" aria-pressed="false" aria-label="Mode cinéma" title="Mode cinéma">◻︎ Ciné</button>
        </div>
      </div>
    </section>

    <section id="projets">
      <h2>Projets sélectionnés</h2>
      <p>Une poignée de travaux pour donner du contexte — le showreel reste la synthèse.</p>
      <div class="projects">
        <article class="card">
          <img src="assets/projet-1.jpg" alt="Aperçu du projet 1" />
          <div class="meta">
            <span>Titre du projet 1</span>
            <a href="#" class="btn ghost" aria-label="Voir le projet 1">Voir</a>
          </div>
        </article>
        <article class="card">
          <img src="assets/projet-2.jpg" alt="Aperçu du projet 2" />
          <div class="meta">
            <span>Titre du projet 2</span>
            <a href="#" class="btn ghost" aria-label="Voir le projet 2">Voir</a>
          </div>
        </article>
        <article class="card">
          <img src="assets/placeholder.jpg" alt="Placeholder projet à venir" />
          <div class="meta">
            <span>Bientôt</span>
            <span class="badge">WIP</span>
          </div>
        </article>
      </div>
    </section>

    <section id="a-propos">
      <div class="grid">
        <div class="col-7">
          <h2>À propos</h2>
          <p>Motion designer orienté·e identité et narration visuelle. À l’aise en 2D/3D, montage et sound design léger. J’aime les génériques, les univers sobres et les détails qui font pro.</p>
          <p>Disponible pour CDI/alternance/freelance. Basé·e à <strong>Ta ville</strong>, mobile.</p>
        </div>
        <div class="col-5">
          <div class="card" style="padding:1rem;">
            <h3 style="margin-top:0">Compétences clés</h3>
            <ul>
              <li>After Effects, Premiere Pro</li>
              <li>Blender / Cinema 4D, Redshift</li>
              <li>Figma, Notion</li>
              <li>Montage, titrage, brand</li>
              <li>Packaging réseaux sociaux</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <section id="contact">
      <h2>Contact direct</h2>
      <p>Pas de formulaire. Un mail ou un DM, et on se parle.</p>
      <div class="hero-actions">
        <a class="btn primary" href="mailto:contact@ton-domaine.fr?subject=Showreel%20—%20Motion%20Design">✉️ contact@ton-domaine.fr</a>
        <a class="btn ghost" href="https://www.linkedin.com/in/ton-handle" target="_blank" rel="noopener">LinkedIn</a>
        <a class="btn ghost" href="https://vimeo.com/ton-handle" target="_blank" rel="noopener">Vimeo</a>
        <a class="btn ghost" href="https://instagram.com/ton-handle" target="_blank" rel="noopener">Instagram</a>
      </div>
    </section>
  </main>

  <footer class="container">
    <small>© <span id="year"></span> Ton Nom — Motion Designer. Portfolio minimal hébergé sur GitHub Pages. Lien recruteur : <code>?view=reel</code>.</small>
  </footer>

  <script>
    // Utils
    const $ = (s, r = document) => r.querySelector(s);
    const $$ = (s, r = document) => Array.from(r.querySelectorAll(s));

    // Year
    $('#year').textContent = new Date().getFullYear();

    const wrap = document.querySelector('#reel.reel-wrap');
    const viewport = document.getElementById('reelViewport');
    const reel = document.getElementById('reelVideo');
    const playBtn = document.getElementById('ctrlPlay');
    const seek = document.getElementById('ctrlSeek');
    const cinemaBtn = document.getElementById('ctrlCinema');

    // Fullscreen (sur le viewport pour garder les contrôles)
    const fsBtn = document.getElementById('fullscreenBtn');
    fsBtn.addEventListener('click', () => {
      if (!document.fullscreenElement) {
        (viewport.requestFullscreen || viewport.webkitRequestFullscreen || viewport.msRequestFullscreen).call(viewport);
      } else {
        (document.exitFullscreen || document.webkitExitFullscreen || document.msExitFullscreen).call(document);
      }
    });
    document.addEventListener('fullscreenchange', () => {
      viewport.classList.toggle('is-fullscreen', !!document.fullscreenElement);
    });

    // Recruiter link
    const params = new URLSearchParams(location.search);
    const recruiterView = params.get('view') === 'reel';
    const revealOnlyReel = () => {
      if (!recruiterView) return;
      $$('#projets, #a-propos, .hero').forEach(n => n.classList.add('hidden'));
      window.scrollTo({ top: $('#reel').offsetTop - 64, behavior: 'instant' });
      reel.muted = true; reel.play().catch(()=>{});
      document.title = 'Showreel — Motion Designer';
    };
    revealOnlyReel();

    // Copier lien recruteur
    $('#copyLink').addEventListener('click', async () => {
      const url = `${location.origin}${location.pathname}?view=reel`;
      try { await navigator.clipboard.writeText(url); toast('Lien recruteur copié'); }
      catch { prompt('Copie manuelle du lien :', url); }
    });
    function toast(msg){
      const t = document.createElement('div');
      t.textContent = msg;
      t.style.cssText = 'position:fixed;bottom:16px;left:50%;transform:translateX(-50%);background:#111;border:1px solid #2a2a33;color:#fff;padding:.6rem .8rem;border-radius:10px;z-index:9999;box-shadow:0 6px 24px rgba(0,0,0,.25)';
      document.body.appendChild(t);
      setTimeout(()=> t.remove(), 1600);
    }

    // —— Contrôles custom : play/pause + seek + cinéma ——
    (function(){
      if (!reel) return;
      // Désactive les contrôles natifs
      reel.controls = false;

      // Play/Pause
      function updatePlayIcon(){ playBtn.textContent = reel.paused ? '▶︎' : '❚❚'; }
      playBtn.addEventListener('click', (e)=>{ e.stopPropagation(); if (reel.paused) reel.play(); else reel.pause(); });
      reel.addEventListener('play', updatePlayIcon);
      reel.addEventListener('pause', updatePlayIcon);
      updatePlayIcon();

      // Toggle play/pause au clic sur la vidéo
      reel.addEventListener('click', ()=>{ if (reel.paused) reel.play(); else reel.pause(); });

      // Seekbar
      let seeking = false;
      function posToValue(){
        const d = reel.duration || 0; if (!d) return 0;
        return Math.round((reel.currentTime / d) * 1000);
      }
      function valueToTime(v){
        const d = reel.duration || 0; return d ? (v/1000) * d : 0;
      }
      reel.addEventListener('timeupdate', ()=>{ if (!seeking) seek.value = posToValue(); });
      reel.addEventListener('loadedmetadata', ()=>{ seek.value = posToValue(); });
      seek.addEventListener('input', ()=>{ seeking = true; reel.currentTime = valueToTime(seek.value); });
      seek.addEventListener('change', ()=>{ seeking = false; });

      // Mode cinéma + transition FLIP
      function toggleCinema(){
        const first = wrap.getBoundingClientRect();
        const wasOn = wrap.classList.contains('cinema');
        wrap.classList.toggle('cinema');
        const last = wrap.getBoundingClientRect();
        // FLIP: delta
        const dx = first.left - last.left;
        const dy = first.top - last.top;
        const sx = first.width / last.width;
        const sy = first.height / last.height;
        // Annule si reduced-motion
        const reduce = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
        if (!reduce) {
          const anim = wrap.animate([
            { transform: `translate(${dx}px, ${dy}px) scale(${sx}, ${sy})`, transformOrigin: 'top center' },
            { transform: 'translate(0,0) scale(1,1)' }
          ], { duration: 320, easing: 'cubic-bezier(.2,.7,0,1)' });
          anim.onfinish = () => { wrap.style.transform = ''; };
        }
        cinemaBtn.setAttribute('aria-pressed', String(!wasOn));
      }
      cinemaBtn.addEventListener('click', (e)=>{ e.stopPropagation(); toggleCinema(); });
    })();

    // —— Préloader Lottie : joue jusqu'au bout (viewer), désactivé (recruteur), teinte pilotable ——
    (function(){
      const preloader = document.getElementById('preloader');
      const skipBtn = document.getElementById('skipPreloader');
      const lottieHolder = document.getElementById('lottie-holder');

      if (recruiterView) {
        preloader?.remove(); // accès direct
        try { if (reel) { reel.muted = true; reel.play().catch(()=>{}); } } catch {}
        return;
      }

      let hideCalled = false;
      function hidePreloader(){ if (hideCalled) return; hideCalled = true; preloader?.classList.add('is-hidden'); }
      skipBtn?.addEventListener('click', hidePreloader);

      const lottieJson = lottieHolder?.getAttribute('data-lottie');
      if (!lottieJson) { console.warn('[preloader] loader.json manquant.'); return; }

      const s = document.createElement('script');
      s.src = 'https://unpkg.com/lottie-web/build/player/lottie.min.js';
      s.onload = () => {
        if (!window.bodymovin) return;
        const anim = window.bodymovin.loadAnimation({ container: lottieHolder, renderer: 'svg', loop: false, autoplay: true, path: lottieJson });
        const desiredColor = lottieHolder?.dataset?.color || getComputedStyle(lottieHolder).color || '#fff';
        function tint(){
          const svg = lottieHolder.querySelector('svg'); if (!svg) return;
          svg.style.color = desiredColor;
          svg.querySelectorAll('[fill]').forEach(el => el.setAttribute('fill', desiredColor));
          svg.querySelectorAll('[stroke]').forEach(el => el.setAttribute('stroke', desiredColor));
        }
        anim.addEventListener('DOMLoaded', () => {
          tint();
          try { const seconds = anim.getDuration(false) || 2.0; const durationMs = Math.max(300, Math.round(seconds*1000)); setTimeout(hidePreloader, durationMs + 200); }
          catch { setTimeout(hidePreloader, 2000); }
        });
        anim.addEventListener('complete', hidePreloader);
      };
      s.onerror = () => { console.warn('[preloader] Échec chargement lottie-web.'); };
      document.head.appendChild(s);

      // Prefetch silencieux
      const ASSET_PREFETCH = [
        // 'assets/projet-1.mp4',
        // 'assets/projet-2.mp4',
      ];
      window.addEventListener('load', async () => {
        for (const url of ASSET_PREFETCH){ try { await fetch(url, { cache:'force-cache' }); } catch {} }
      });
    })();
  </script>
</body>
</html>
